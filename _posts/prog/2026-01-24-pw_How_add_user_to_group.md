---
layout: post
title:  Pw - команда для работы с пользователями и группами в системе FreeBSD
categories: Программы
---

### Добавить пользователя в группу (in BSD)

Функция ключа -m — добавление пользователя в существующую группу

`pw groupmod video -m jenit`

### Посмотреть текущего пользователя и его принадлежность к группам:

`id`

### Или любого другого пользователя:

`id jenit`

Получить список пользователей можно в файле:

`ee /etc/passwd`

Список активных пользователей:

`users`

#### Создание пользователя

Выполняется из командной строки от суперпользователя:

`pw useradd jenit`

* это базовая команда, которая создаст пользователя jenit.

Добавить пользователя с правами root (добавляем в группу wheel):

`pw useradd jenit -G wheel`

#### Часто используемые ключи

```sh
-c 	Комментарий. Любой текст для описания создаваемой учетной записи. 	Пусто.
-d 	Путь к домашнему каталогу пользователя. 	/home/<username>
-g 	Числовой идентификатор начальной группы пользователя. 	Последний номер +1.
-G 	Перечень групп через запятую, в которые войдет учетная запись. 	Путо.
-m 	При создании записи создать домашнюю директорию. 	Не создавать.
-s 	Командная оболочка. 	/bin/sh
-u 	Числовой идентификатор пользователя. 	Последний номер +1.
```
#### Пароль пользователя

Задаем пароль:

`passwd jenit`

Требуем сменить пароль при следующем входе:

`pw usermod jenit -p -1`

#### Редактирование пользователя

Добавим имеющегося пользователя в группу wheel, чтобы дать ему права root:

`pw usermod jenit -G wheel`

* как видим, команда не сильно отличается от создания пользователя. Просто меняем useradd на usermod.

Редактирование пользователя в файле passwd

Открываем следующий файл:

`ee /etc/passwd`

Там мы увидим, примерно, следующее:

`jenit:*:1002:1002:User &:/home/jenit:/bin/sh`

* где jenit — имя учетной записи; первый 1002 — идентификатор пользователя; второй 1002 — идентификатор группы пользователя; /home/jenit — домашняя папка пользователя; /bin/sh — командная оболочка по умолчанию.

Приведем запись к следующему виду, чтобы сменить командный интерпретатор на bash:

`jenit:*:1002:1002:User &:/home/jenit:/usr/local/bin/bash`

Чтобы применить новые настройки обновляем master.passwd следующей командой:

`pwd_mkdb -p /etc/master.passwd`

#### Удаление и блокировка

Удаление:

`pw userdel jenit`

Блокировка:

`pw lock jenit`

Разблокирование:

`pw unlock jenit`

#### Примеры

Создать пользователя с определенным расположением домашней директории:

`pw useradd jenit -d /home/newdmosk`

Создание пользователя с определенными UID и GID (соответственно идентификаторы пользователя и группы):

`pw useradd jenit -u 900 -g 950`

