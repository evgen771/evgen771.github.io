---
layout: post
title:  ee - это простой и удобный консольный редактор
category: Программы
---

Редактор «ee» («easy editor» - «простой редактор») - это простой
и удобный консольный редактор, использование которого не требует ознакомления с инструкцией.

Автор - Алексей Федорчук.

*Выдержки из статей Алексея Федорчука и др.*

Редактор `ee` (Easy Editor) представляет собой штатное средство для работы с текстами во FreeBSD. Он входит в состав базовой системы (Distributions) и, собственно, является там чуть не единственным представителем этого семейства. Не считая, конечно, классического `vi`, который, однако, а) функционально ограничен (сравнительно с современным Vim) и б) поначалу не особенно легок в использовании. Так что на первом этапе освоения FreeBSD `ee` вполне может быть естественным выбором. Особенно если учесть, что, при всех своих ограничениях, о которых я скажу позднее, он, подобно большинству штатных средств FreeBSD, не так уж прост и незатейлив, как кажется на первый взгляд. Это делает его более чем пригодным для правки конфигурационных файлов как на начальном этапе настройки FreeBSD, так и в дальнейшем, например, при всякого рода аварийных ситуациях. А что ещё требуется от текстового редактора «легкой весовой категории»?

Поскольку `ee` представляет собой неотъемлемый компонент базовой системы, исполняемый его файл имеет своим местопребыванием каталог `/usr/bin/`, всегда входящий в состав переменной path любого пользователя. Так что запускается этот редактор просто — одноименной командой

`% ee filename`

где `filename` (необязательный аргумент) — имя файла, подлежащего редактированию. После этого открываются два окна редактора. В нижнем — редактируемый текст (если файла с указанным именем не существует, или `ee` запущен без аргумента — окно это остается пустым), в верхнем — краткая, но практически исчерпывающая справка по использованию программы .

Предусмотрен и запуск `ee` с опциями командной строки, такими, как:

- -e — отключение преобразования символов табуляции в пробелы;
- -i — отключение информационного окна со справкой;
- -h — отключение подсветки рамок вокруг информационного окна; кроме мифического повышения производительности на некоторых терминалах, это придаёт редактору более строгий вид;
- +# — перемещение курсора к строке с указанным номером # при открытии файла, что полезно при редактировании конфигов.

Навигация по тексту осуществляется или обычным способом — клавишами управления курсора, **PageUp**, **PageDown**, **Home**, **End** и т.д., либо — специфичными для `ee` управляющими (или командными) комбинациями клавиши **Control** с какой-либо из литерных. Так, комбинация **Control**+**f** (от _forward_) перемещает курсор на один символ вправо (т.е. вперед), **Control**+**b** (от _backward_) — на один символ влево (т.е. назад), и так далее. Причем возможности управляющих комбинаций шире — например, они позволяют перейти к следующему слову (**Control**+**z**), перейти в начало (**Control**+**t**) или конец (**Control**+**u**) экрана.

Аналогично и редактирование текста можно выполнять двояким образом: посредством клавиш редактирования (**Backspace**, **Delete**) или такими же управляющими комбинациями. Причем последний способ, как и в случае навигации, — более эффективен, позволяя удалить не только отдельный символ (**Control**+**d**), но и целиком слово (**Control**+**w**) или строку (**Control**+**k**).

Редактор `ee` с точки зрения интерфейса является гибридным, и все основные действия могут быть выполнены в нём тремя способами: с помощью управляющих клавиш, о которых только что говорилось (и более подробные сведения о которых можно почерпнуть из `man ee`), через меню или прямыми командными директивам.

Главное меню редактора вызывается нажатием клавиши **Escape**. 

Пункты его - следующие:

Пункты главного меню - следующие:

```sh
a) выйти из редактора 
b) подсказка 
c) операции с файлами
d) обновить экран
e) параметры 
f) поиск 
g) разное 
```

Смысл всех пунктов вполне понятен, и пользователь легко освоит их эмпирическим методом (тем более, что многого осваивать и не требуется). 

Скажу только, что при выходе из редактора (пункт a)) выдается запрос на сохранение изменений в файле, буде таковые производились:

```sh
Файл изменён!          
                        
a) сохранить и выйти   
b) не сохранять        
                       
для отмены нажмите Esc 
```

И еще следует заметить, что вывод подсказок и сообщений на русском языке (как в приведенном примере) происходит только при правильной локализации, т.н. установке русской локали `locale`.

Каждый из указанных пунктов вызывает панель соответствующих подменю. Выбор требуемого пункта осуществляется клавишами управления курсором (Down и Up) или нажатием соответствующей литерной клавиши (например,**a** — для выхода из редактора). Последнее, впрочем, работает только при латинской раскладке клавиатуры. Выход из меню осуществляется повторным нажатием клавиши **Escape**. Та же клавиша в любом из подменю возвращает в окно редактирования текста.

В панели подменю подсказки выводится более подробная, нежели в информационном окне, справка по управляющим последовательностям и командам .

Подменю файловых операций содержит следующие пункты:

- прочесть файл - считывание существующего файла и помещение его содержимого в позиции курсора файла текущего;
- записать в файл - запись текущего файла ;
- сохранить текущий файл и
- распечатать файл - понятно без комментариев.

Пункт обновления экрана никакого подменю не вызывает, а лишь совершает указанное действие.

Пункт е) параметры вызывает панель просмотра текущих настроек редактора с возможностью их изменения:

- a) табуляция пробелами НЕТ
- b) поиск с учётом регистра НЕТ
- c) авто-перевод строки НЕТ
- d) авто-формат абзаца НЕТ
- e) 8-битные символы ДА
- f) окно подсказки ДА
- g) клавиши как в Emacs ДА
- h) ширина текста 79
- i) 16-битные символы НЕТ
- j) сохранить установки

Выбрав соответствующий пункт подменю, можно изменить текущие значения параметров с НЕТ (OFF) на ДА (ON) и наоборот, или (для ширины текста) задать численное значение, после чего сохранить новые установки - в текущем каталоге или домашнем каталоге пользователя именем `.init.ee`code>.

В подменю поиска - два пункта: 

что искать и повторить поиск, смысл которых ясен.

В подменю о разном - три пункта:

- форматирование абзаца,
- вызов оболочки для прямого ввода команд, не выходя из редактора, и
- вызов проверки орфографии, которая выполняется внешней программой типа ispell или aspell.

Как видно из сказанного, меню `ee` просто и понятно. 

Однако работать через него иногда бывает скучновать — по каким-то, не вполне ясным мне, причинам, вывод панели меню и его подменю происходит с задержкой, не зависящей ни от режима (в чистой консоли или в эмуляторе терминала Иксов), ни от мощности машины. 

Однако прибегать к меню совсем не обязательно, ибо все те же действия можно выполнить прямыми командами.

Переход в командный режим осуществляется комбинацией клавиш **Control**+**C**, после чего у нижнем левом углу окна редактирования появляется приглашение собственной командной строки редактора:

command:

Команд в `ee` немного, и они мнемонически понятны, так что запомнить их легко:

- `help` — вывод подробной подсказки;
- `read` — вставка указанного файла в позицию курсора файла текущего;
- `write` — запись текущего файла под произвольным именем;
- `exit` — выход из редактора с записью выполненных изменений;
- `quit` — выход из редактора без записи изменений;
- `line` — вывод номера текущей строки и количества символов в ней;
- `expand` — преобразование табуляции в пробелы;
- `noexpand` — не преобразование :) табуляции в пробелы;
- `file` — распечатать файл;
- `char` — вывод числового значения ASCII-кода текущего символа;
- `case` — поиск, чувствительный к регистру символов;
- `nocase` — поиск, не чувствительный к регистру;
- `!cmd` — выполнение команды шелла внутри редактора; вывод команды можно через «мышиный» буфер перетащить в окно редактирования текста;
- `0-9` и далее — переход на строку с указанным номером.

В итоге оптимальным методом работы в `ee`, по моему мнению, будет использование управляющих последовательностей вкупе с директивами командного режима.

---

Навигация по тексту осуществляется или обычным способом - `клавишами управления курсора, PageUp, PageDown, Home, End и т.д.`, либо - специфичными для ee управляющими (или командными) комбинациями клавиши `Control` с какой-либо из литерных. Так, комбинация `Control+f` (от forward) перемещает курсор на один символ вправо (т.е. вперед), `Control+b` (от backward) - на один символ влево (т.е. назад), и так далее. Причем возможности управляющих комбинаций шире - например, они позволяют перейти к следующему слову `Control+z`, перейти в начало `Control+t` или конец `Control+u` экрана.

Аналогично и редактирование текста можно выполнять двояким образом: посредством клавиш редактирования `Backspace, Delete` или такими же управляющими комбинациями. Причем последний способ, как и в случае навигации, - более эффективен, позволяя удалить не только отдельный символ `Control+d`, но и целиком слово `Control+w` или строку `Control+k`.

#### Параметры 

Из командной строки доступны следующие параметры:

        -e  Отключает преобразование символа табуляции в пробелы.

        -i  Отключает отображение информационного окна в верхней части терминала.

        -h  Отключает подсветку границ окон и меню (улучшает)
	   (производительность на некоторых терминалах).

        +#  Перемещает курсор на строку '#' при запуске.

#### Клавиши управления
     
Для выполнения любых действий, кроме вставки текста, пользователь должен использовать элемент управления клавиши (клавиша Control, обозначаемая символом "^") с помощью буквенной клавиши (например, ^a) и функциональных клавиш, доступных на клавиатуре (например,  «Следующая   страница»  ,  «Предыдущая   страница»  , клавиши со стрелками и т. д.).

	   ^a Запрос на ввод десятичного значения символа для вставки.
	   ^b Переместиться в конец текста.
	   ^c Получить приглашение для выполнения команды.
	   ^d Переместите курсор вниз.
	   ^e Запрос на ввод строки для поиска.
	   ^f Восстановить последний удаленный символ.
	   ^g Переместиться в начало строки.
	   ^h Backspace.
	   ^i Tab.
	   ^j Вставьте перевод строки.
	   ^k Удалить символ, на котором находится курсор.
	   ^l Переместите курсор влево.
	   ^m Вставьте перевод строки.
	   ^n Перейти на следующую страницу.
	   ^o Переместитесь в конец строки.
	   ^p Перейти на предыдущую страницу.
	   ^r Переместите курсор вправо.
	   ^t Переместить в начало текста.
	   ^u Переместите курсор вверх.
	   ^v Восстановить последнее удаленное слово.
	   Удалите слово, начинающееся с позиции курсора.
	   ^x Поиск.
	   ^y Удалить текст от позиции курсора до конца строки.
	   ^z Восстановить последнюю удаленную строку.
	   ^[ (ESC) Всплывающее меню.

#### EMACS   клавиш  режим

Поскольку многие оболочки предоставляют режим Emacs (для перемещения курсора и других целей),(операции редактирования), некоторые привязки, которые могут быть более полезны для людей.

Эти привязки уже предоставлены. К ним можно получить доступ через  меню настроек  или через файл инициализации.
       
Сопоставления выглядят следующим образом:
       
	      ^a Переместиться в начало строки.
	      ^b Назад на 1 символ.
	      ^c Командная строка.
	      ^d Удалить символ, на котором находится курсор.
	      ^e Конец строки.
	      ^f Вперед на 1 символ.
	      ^g Вернуться на 1 страницу назад.
	      ^h Backspace.
	      ^i Tab.
	      ^j Восстановить последний удаленный символ.
	      ^k Удалить строку.
	      ^l Восстановить последнюю удаленную строку.
	      ^m Вставьте перевод строки.
	      ^n Перейти на следующую строку.
	      ^o Запрос на ввод десятичного значения символа для вставки.
	      ^p Предыдущая строка.
	      ^r Восстановить последнее удалённое слово.
	      ^t Переместить в начало текста.
	      ^u Переместиться в конец текста.
	      ^v Перейти на следующую страницу.
	      Удалите слово, начинающееся с позиции курсора.
	      ^y Запрос строки для поиска.
	      ^z Следующее слово.
	      ^[ (ESC) Всплывающее меню.

Возможности настройки `ee` ограничены, но они имеются. Типовой настроечный файл этого редактора —`/usr/share/misc/init.ee`. По умолчанию он включает в себя следующие строки:

```sh
emacs
noexpand
nomargins
```
Его можно скопировать в свой домашний каталог:

`% cp /usr/share/misc/init.ee ~/.init.ee`

где и подвергнуть всяким издевательствам. А можно поступить иначе — через меню установить необходимые настройки, как было сказано выше, и записать их в виде всё того же файла `~/.init.ee`. У меня он имеет такой вид:

```sh
NOCASE
NOEXPAND
NOINFO
NOMARGINS
NOAUTOFORMAT
PRINTCOMMAND lpr
RIGHTMARGIN 80
NOHIGHLIGHT
EIGHTBIT
NOEMACS
16BIT
```
В этом конфиге отключен режим совместимости клавиш с `Emacs (NOEMACS)`

