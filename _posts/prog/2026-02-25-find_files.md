---
layout: post
title:  Команда find - поиск файлов,директорий
category: Программы
---

---

`find / -user vasya`
Найти все директории и файлы принадлежащие пользователю vasya. Поиск будет производиться, начиная с корневой директории `/`

---

`find / -name filedir`

Найти директории и файлы с именем `filedir`. Поиск будет производиться, начиная с корневой директории `/`

---

`find /usr/bin -type f -atime +20`

Найти все файлы в директории `/usr/bin`, время последнего обращения к которым более 20 дней

----

`find /usr/bin -type f -mtime -10`

Найти все файлы в директории `/usr/bin`, которые были созданы или модифицированы в течении последних 10 дней

---

`find / -xdev -name \*.rpm`

Искать директории и файлы, имена которых оканчиваются на `.rpm`, но игнорируя съёмные накопители, `cdrom`, `usb` и т.п.

---

`find . -maxdepth 1 -name *.jpg -print -exec convert`

Найти в текущей директории все файлы с расширением `.jpg` и выполнить для каждого команду `convert` (`Imagemagick`). Начиная с версии `Imagemagick7`, команду `magick`.

---

`find /path/to/dir -name \*.c`

Найти все директории и файлы, имена которых оканчиваются на `.с`. 

Поиск будет производиться, начиная с директории `/path/to/dir`.

---

`find / -name *.rpm -exec chmod 755 '{}' \;`

Начиная с корня, найти все фалы и директории, имена которых оканчиваются на `.rpm`, и для каждого изменить права доступа

Команда `chmod 755` в операционной системе `Linux` устанавливает полные права доступа (чтение, запись, выполнение) для владельца файла, а права на чтение и выполнение — для группы и остальных пользователей.

Число `755` разделено на три части, представляющие разрешения для владельца, группы и остальных:

    7 — для владельца;
    5 — для группы;
    5 — для остальных.

---

`whereis ls`

Вывод полных путей к бинарным файлам, файлом исходных кодов и руководств, имеющих отношение к файлу `ls`

---

`locate \*.ps`

Поиск всех файлов, содержащих в имени `.ps` по специальной базе данных, предварительно сформированной командой `updatedb`

---

`which ls`

Вывести полный путь до файла `ls`

---

#### Search. Примеры.

- Вывести список всех файлов с расширением *.mp3:

`find . –name "*.mp3"`

- Найти все .txt файлы в указанной директории и её поддиректориях:

`find /path/to/dir -name "*.txt"`

- Список всех директорий в указанном пути:

`find /path/to/dir -type d`

- Найти файлы больше 100MB:

`find /path/to/dir -type f -size +100M`

- Файлы, изменённые за последние 7 дней

`find /path/to/dir -mtime -7`

- Удалить все файлы в указанной директории. ⚠ Будьте осторожны!:

`find /path/to/dir -exec rm {} \;`

- Найти файлы с определёнными правами (например, 644):

`find /path/to/dir -perm 644`

Права доступа `chmod 644` в `Linux` — это настройки, которые означают, что владелец файла может `читать и записывать` его, а члены группы и остальные пользователи — `только читать`. Это стандартное разрешение для обычных файлов.

- Найти файлы, принадлежащие указанному пользователю:

`find /path/to/dir -user username`

- Найти пустые айлы и директории:

`find /path/to/dir -empty`

- Найти ошибки и выведет строки с ошибками в лог-файлах:

`find /path/to/dir -name "*.log" -exec grep "error" {} \;`

- Найти и удалить все `.tmp` файлы:

`find /path/to/dir -name "*.tmp" -delete`


#### Разъяснение использованных команд, опции и аргументы:

- `find` — утилита поиска файлов в файловой системе;
- `.` — указывает, что поиск следует вести относительно текущего рабочего каталога;
- `–name` — проверяет название файлов на соответствие заданному шаблону;
- `*.mp3` — шаблон, соответствующий файлам искомого формата;
