---
layout: post
title: "FFmpeg. Базовый синтаксис. Основное."
categories: FFmpeg
---


Базовый синтаксис команды **ffmpeg** выглядит следующим образом:


```bash
ffmpeg [global_options] {[input_file_options] -i input_url}... {[output_file_options] output_url}...
```

#### Разбор компонентов

1. **`global_options`**  
   Параметры, действующие на всю операцию (например, уровень логирования).


2. **`[input_file_options]`**  
   Настройки, относящиеся к входному файлу (кодеки, фильтры и т. п.).

3. **`-i input_url`**  
   Указывает входной файл/поток. Можно задать несколько источников.


4. **`[output_file_options]`**  
   Параметры для выходного файла (кодеки, фильтры, битрейт и др.).


5. **`output_url`**  
   Путь/имя выходного файла или адрес выходного потока.

---

#### Ключевые опции (примеры)

- **-i** — задать входной файл: 

  ```bash
  ffmpeg -i input.mp4
  ```

- **-c** — выбрать кодек:  
  - `-c:v` — видеокодек (например, `libx264`, `vp9`);  
  - `-c:a` — аудиокодек (например, `aac`, `libvorbis`, `flac`).  

  Пример: 

  ```bash
  ffmpeg -i input.mp4 -c:v libx264 -c:a aac output.mp4
  ```

- **-vf** — применить видеофильтры (например, масштабирование):  

  ```bash
  ffmpeg -i input.mp4 -vf scale=640:480 output.mp4
  ```

- **-filter_complex** — сложные фильтры (например, наложение изображения):  
  ```bash
  ffmpeg -i video.mp4 -i logo.png -filter_complex "[0:v][1:v]overlay=10:10" output.mp4
  ```

- **-b:v** — задать битрейт видео (например, `1M` = 1 Мбит/с): 

  ```bash
  ffmpeg -i input.mp4 -b:v 1M output.mp4
  ```

- **-r** — изменить частоту кадров (например, `30` fps): 

  ```bash
  ffmpeg -i input.mp4 -r 30 output.mp4
  ```

- **-ss** и **-t** — обрезать видео: 

  - `-ss 00:01:00` — начало с 1‑й минуты;  
  - `-t 10` — длительность 10 секунд. 

  Пример: 

  ```bash
  ffmpeg -i input.mp4 -ss 00:01:00 -t 10 -c copy clip.mp4
  ```

- **-vn** — исключить видео (оставить только аудио):  

  ```bash
  ffmpeg -i input.mp4 -vn audio.mp3
  ```

- **-ar** — частота дискретизации аудио (например, `44100` Гц):  

  ```bash
  ffmpeg -i input.mp4 -ar 44100 output.mp4
  ```

- **-ab** — битрейт аудио (например, `192k`): 

  ```bash
  ffmpeg -i input.mp4 -ab 192k output.mp4
  ```

- **-ac** — число аудиоканалов (например, `2` = стерео): 

  ```bash
  ffmpeg -i input.mp4 -ac 2 output.mp4
  ```

- **-f** — указать формат файла (например, `mp3`, `gif`):  

  ```bash
  ffmpeg -i input.mp4 -f gif animation.gif
  ```

---

#### Примеры типовых задач

1. **Конвертация MP4 → WebM**: 

   ```bash
   ffmpeg -i input.mp4 -c:v vp9 -c:a libvorbis output.webm
   ```

2. **Извлечение аудио в MP3**:  

   ```bash
   ffmpeg -i video.mp4 -vn -ar 44100 -ac 2 -ab 192k audio.mp3
   ```

3. **Создание GIF из видео**:  

   ```bash
   ffmpeg -i input.mp4 output.gif
   ```

4. **Масштабирование видео**:  

   ```bash
   ffmpeg -i input.mp4 -vf scale=640:480 output.mp4
   ```

5. **Копирование потоков без перекодирования**: 

   ```bash
   ffmpeg -i input.mp4 -c copy output.mp4
   ```

---

#### Советы

- Чтобы увидеть список поддерживаемых форматов: 

  ```bash
  ffmpeg -formats
  ```

- Для подробной информации о кодеках:  

  ```bash
  ffmpeg -codecs
  ```

- Используйте `-hide_banner`, чтобы скрыть служебную информацию при запуске.
