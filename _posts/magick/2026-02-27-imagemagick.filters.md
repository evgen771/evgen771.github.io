---
layout: post
title: ImageMagick. Фильтры для изображений.
categories: Magick
---


#### Как имитировать картину маслом  

Чтобы фотография стала похожа на нарисованную красками картину используйте опцию:

`-paint` РАДИУС

Эта опция создаёт имитацию картины маслом.

Каждый пиксель заменяется наиболее часто встречающимся цветом в круговой окрестности, ширина которой определяется радиусом.

Пример команды:

`magick IMAGE.jpg -paint 4 test1.jpg`


#### Как имитировать рисунок углем  

Чтобы фотография выглядела будто бы нарисована углём, используйте опцию: 

`-charcoal` РАДИУС

Пример команды:

`magick IMAGE.jpg -charcoal 5 test2.jpg`


#### Как имитировать карандашный набросок  

Опция `-sketch` ГЕОМЕТРИЯ создаёт имитацию карандашного наброска.

Пример команды:

`magick IMAGE.jpg -sketch 5 test3.jpg`

У данной опции возможны следующие варианты синтаксиса:

```
-sketch radius
-sketch radius{xsigma}+angle
```

Последний вариант опции создаёт эскиз с заданным радиусом, стандартным отклонением (сигма) и углом. 

Указанный угол — это угол, под которым нарисовано изображение. Это то направление, с которого люди считают, что объект исходит.

#### Как сделать изображение чёрно-белым  

Как конвертировать изображение в чёрно-белое в командной строке Linux? 

С помощью опции `-monochrome` вы можете преобразовать изображение в чёрно-белое.

Пример команды:

`magick IMAGE.jpg -monochrome test4.jpg`

#### Как сделать изображение чёрно-белым 2

Как конвертировать изображение в чёрно-белое в командной строке Linux? 

С помощью опции `-gray` вы можете преобразовать изображение в чёрно-белое.

#### Как сделать изображение чёрно-белым(градации серого)

Пример команды:

`magick IMAGE.jpg -gray test4.jpg`

#### Создание негатива изображения

С помощью опции `-negate` вы можете заменить каждый пиксель его дополнительным цветом.

Красная, зелёная и синяя интенсивность изображения инвертируются. Белый становится чёрным, жёлтый становится синим и т. д. 

Используйте `+negate`, чтобы инвертировать только пиксели изображения в градациях серого.

Пример команды:

`magick IMAGE.jpg -negate test5.jpg`

#### Как сделать зеркальное изображение (по горизонтали или вертикали)

Чтобы отразить изображение по горизонтали или вертикали, используйте опции:

```
-flip (изображение будет отражено, перевёрнуто сверху вниз)
-flop (изображение будет отражено, перевёрнуто слева направо — в точности как в зеркале)
```

Пример команды:

`magick IMAGE.jpg -flip test6.jpg`

Пример команды:

`magick IMAGE.jpg -flop test7.jpg`
	

#### Как повернуть изображение

Для поворота изображения используйте опцию `-rotate` ГРАДУСЫ. В качестве градусов может быть установлена как положительная (для поворота по часовой стрелке), так и отрицательная (для поворота против часовой стрелки) величина. 

Например:

`magick IMAGE.jpg -rotate 30 test8.jpg`

`magick IMAGE.jpg -rotate -30 test8.jpg`

По умолчанию появившиеся пустые углы будут залиты белым цветом, если вы хотите изменить цвет, то используйте опцию `-background`:

`magick IMAGE.jpg -background VioletRed -rotate 30 test8.jpg`

Если вы хотите вместо заполнения пустых краёв сделать так, чтобы изображение было увеличено для заполнения всего пространства, то используйте опцию `-distort ScaleRotateTranslate` МАСШТАБ,УГОЛ.

Например:

`magick IMAGE.jpg -distort ScaleRotateTranslate 1.5,30 test10.jpg`

Опция `-distort ScaleRotateTranslate` может принимать разное количество аргументов, которые меняют и её поведение:

`magick IMAGE.jpg -distort ScaleRotateTranslate 500,500,30 test10.jpg`

Ещё две опции, имеющие отношение к повороту и отражению изображений:

- -transpose: отразит изображение по диагонали от левого верхнего угла к правому нижнему. Эта опция математически транспонирует массив пикселей. Она эквивалентна последовательности опций -flip -rotate 90.
- -transverse: зеркально отображает изображение по диагонали изображения внизу слева на вверх справа. Эквивалентно операциям `-flop -rotate 90`.

Примеры использования:


`magick IMAGE.jpg -transpose test11.jpg`

`magick IMAGE.jpg -transverse test11.jpg`

#### Название всех цветов

Имена всех цветов вы можете посмотреть с помощью следующей команды:

`magick -list color`

#### Прокручивание изображений. Эффект киноплёнки

Опция `-roll` ГЕОМЕТРИЯ проворачивает изображение по вертикали или горизонтали так, что его части оказываются на противоположной стороне. 

В качестве аргумента опции `-roll` нужно указать два числа, которые могут быть как положительные, так и отрицательные, которые показывают количество пикселей на которое нужно провернуть изображение по вертикали и горизонтали.

Пример команды:

`magick IMAGE.jpg -roll +130+150 test11.jpg`

#### Как имитировать фото Polaroid в командной строке

С помощью опции `-polaroid` УГОЛ можно имитировать фото `Polaroid`.

Угол показывает, на сколько изображение должно быть повёрнуто.

Пример команды:

`magick IMAGE.jpg -polaroid -10 test12.jpg`

`magick ffmpeg4.jpg -background black -polaroid -10 test12.jpg`

#### Как уменьшить шумность картинки в командной строке Linux  

Опция `-noise` ГЕОМЕТРИЯ в последних версиях `ImageMagick` не работает, поскольку объявлена устаревшей. 

Вместо неё используйте сочетание `-statistic NonPeak` ИНТЕНСИВНОСТЬ.

Например:

`magick IMAGE.jpg -statistic NonPeak 3 test13.jpg`

Слишком большие значения ИНТЕНСИВНОСТИ делают изображение нереалистичным.

#### Как увеличить шумность картинки в командной строке Linux  

Для увеличения шумности используйте следующий набор опций: 

`-attenuate` ИНТЕНСИВНОСТЬ `+noise` ТИП

В качестве **ИНТЕНСИВНОСТИ** укажите число (по умолчанию **1.0**). В качестве **ТИПА** шума выберите из следующих вариантов:

```
Gaussian
Impulse
Laplacian
Multiplicative
Poisson
Random
Uniform
```

Обратите внимание, что `Random` заменит изображение шумом, а не добавит шум к изображению. Используйте `Uniform`, если хотите добавить к изображению случайный шум.

Пример команды:

`magick IMAGE.jpg -attenuate 1.5 +noise Gaussian test14.jpg`

Такого же результата вы можете достичь с помощью опции -evaluate`, например:

`magick IMAGE.jpg -evaluate Gaussian-noise 1.5 test14.jpg`|

Подробное описание опции `-evaluate` и её возможные аргументы: 

[https://imagemagick.org/script/command-line-options.php#evaluate](https://imagemagick.org/script/command-line-options.php#evaluate)


#### Как осветлить или затемнить края изображения  

Опция `-raise` ЗНАЧЕНИЕ осветлит или затемнит края изображения для создания 3D-эффекта.

Для создания эффекта 3D. Используйте `-raise` для создания эффекта приподнятости, в противном случае используйте `+raise`

`magick IMAGE.jpg -raise 50 test22.jpg`

`magick IMAGE.jpg +raise 50 test22.jpg`

В отличие от аналогичной опции `-frame` (рассмотрена далее),`-raise` не изменяет размеры изображения.

#### Как создать рамку вокруг изображения  

Чтобы поместить изображение в рамку используйте опцию `-frame`.

Если вы хотите однотонную рамку без эффектов, то укажите после `-frame` одно число:

`magick IMAGE.jpg -mattecolor peru -frame 19 test23.jpg`

Если вы хотите рамку с эффектом объёма, то укажите четыре числа: `-frame AxA+B+C`:

`magick IMAGE.jpg -mattecolor peru -frame 19x19+3+6 test23.jpg`

Первые два числа (**A**) определяют толщину рамки, второе число (**B**) определяет толщину внешнего края, последнее число (**C**) определяет толщину внутреннего края.

Опция `-mattecolor` устанавливает цвет рамки.

#### Как создать виньетку  

Опция `-vignette` смягчает края изображения в стиле виньетки.

Формат: 

`-vignette РАДИУС{xСИГМА}{+-}x{+-}y{%}`

Спад эффекта виньетки контролируется **РАДИУСxСИГМА** (здесь две переменных `radius` и `sigma`, а также знак умножения, то есть `radius x sigma`). 

Для номинального спада это будет установлено на `0xsigma` (то есть `0 x sigma`). 

Значение `0x0` создаст `круг/эллипс` без спада. Аргументы `x и y` управляют размером круга. 

Большие значения уменьшают радиусы, а меньшие значения увеличивают радиусы. 

Значения +0+0 будут генерировать круг/эллипс того же размера, что и изображение. 

Значения по умолчанию для x и y составляют 10% от соответствующего размера изображения. 

Таким образом, радиусы будут уменьшены на 10 %, т. е. диаметры круга/эллипса будут составлять 80 % от соответствующего размера изображения. 

Обратите внимание, что символ процента в геометрии влияет на `x и y`, тогда как радиус и сигма являются абсолютными значениями (например, `-vignette "0x2+10%+10%"`).

Примеры команды:

`magick IMAGE.jpg -vignette 20x100 test24.jpg`

`magick IMAGE.jpg -vignette 0x100 test24.jpg`


Множество примеров как сделать разнообразные рамки и обрамления изображений вы найдёте по ссылке: 

[https://imagemagick.org/Usage/thumbnails/](https://imagemagick.org/Usage/thumbnails/)


#### Как сделать изображение светлее. Как увеличить экспозицию  

Для увеличения количества белого используйте опцию `-sigmoidal-contrast` ЧИСЛО,0%. Чем больше **ЧИСЛО**, тем сильнее будет изменение, например:

`magick IMAGE.jpg -sigmoidal-contrast 4,0% test25.jpg`

Для уменьшения количества чёрного используйте опцию `+sigmoidal-contrast` ЧИСЛО,100%. 

Чем больше **ЧИСЛО**, тем сильнее будет изменение, например:

`magick IMAGE.jpg +sigmoidal-contrast 4,100% test25.jpg`

#### Как сделать изображение темнее. Как уменьшить экспозицию  

Для уменьшения количества белого используйте опцию `+sigmoidal-contrast` ЧИСЛО,0%. 

Чем больше **ЧИСЛО**, тем сильнее будет изменение, например:

`magick IMAGE.jpg +sigmoidal-contrast 4,0% test26.jpg`

Для увеличения количества чёрного используйте опцию `-sigmoidal-contrast` ЧИСЛО,100%. 

Чем больше **ЧИСЛО**, тем сильнее будет изменение, например:

`magick IMAGE.jpg -sigmoidal-contrast 4,100% test26.jpg`












