---
layout: post
title: ImageMagick. Пакетная обработка изображений 1
categories: Magick
---



Для обработки нескольких файлов одновременно можно использовать скрипты в связке с `ImageMagick`. 

Например, чтобы уменьшить размер всех JPEG-файлов в текущей директории:

```bash
for file in *.jpg; do
  magick "$file" -resize 50% "resized_$file"
done
```

Этот скрипт уменьшит размер всех изображений на 50% и сохранит их с префиксом `resized_`.

---

Вот как можно модифицировать скрипт для обработки нескольких форматов:

```bash
#!/bin/bash
for file in *.{jpg,jpeg,png,webp,gif}; do
  if [[ -f "$file" ]]; then
    magick "$file" -resize 50% "resized_$file"
  fi
done
```

#### Команда -strip -quality 80 -resize 640x340!

Пояснение:

- `*.{jpg,jpeg,png,webp,gif}` — это расширение синтаксиса оболочки (bash, zsh), которое разворачивается во все файлы с указанными расширениями.

- `[[ -f "$file" ]]` — проверка, существует ли файл. Это предотвращает ошибки, если ни один из указанных форматов не найден (в таком случае шаблон останется без замены).

- `magick "$file" -resize 50% "resized_$file"` — команда уменьшает изображение на 50% по обоим измерениям с сохранением пропорций и сохраняет результат с префиксом resized_.

---

#### Дополнительные опции для улучшения

Добавьте -quality 85 для контроля качества JPEG:

```bash
#!/bash
magick "$file" -resize 50% -quality 85 "resized_$file"
```

Удалите метаданные для уменьшения размера файла:

```bash
#!/bash
magick "$file" -resize 50% -strip -quality 85 "resized_$file"
```

Такой подход подходит для массового изменения размера изображений в разных форматах с минимальными усилиями.










